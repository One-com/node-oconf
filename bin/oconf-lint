#!/usr/bin/env node
var argv = require('optimist')
    .demand(1)
    .usage('Usage: $0 path [..., path]')
    .argv;

var files = argv._.map(function (path) {
    return require('path').resolve(process.cwd(), path);
});

require('async').eachSeries(files, require('../lib/lint'), function (err) {
    if (err) {
        console.error(err.file, '\n');
        console.error(err.message);
        process.exit(1);
    } else {
        console.warn('No linting errors found.');
        process.exit(0);
    }
});
